{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n/// <reference path=\"./wechat.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Behavior({\n    methods: {\n        checkKey(datakey) {\n            if (!this.rules)\n                return console.warn('==== 未定义 rules 验证规则! ====');\n            // 验证结果\n            let result = { valid: true, datakey, message: 'validate:ok' };\n            for (let ruleKey in this.rules[datakey]) {\n                const rule = this.rules[datakey][ruleKey];\n                // 处理验证规则\n                if (rule.required)\n                    rule.pattern = /[\\S]+/;\n                const reg = new RegExp(rule.pattern);\n                // 验证数据\n                const valid = reg.test(this.data[datakey]);\n                // 验证结果\n                if (!valid) {\n                    result.valid = valid;\n                    result.message = rule.message;\n                    break;\n                }\n            }\n            return result;\n        },\n        validate(key) {\n            if (key)\n                return this.checkKey(key);\n            for (let dataKey in this.rules) {\n                const { valid, message } = this.checkKey(dataKey);\n                if (!valid) {\n                    wx.showToast({ title: message, icon: 'none' });\n                    return valid;\n                }\n            }\n            return true;\n        },\n    },\n});\n"]}